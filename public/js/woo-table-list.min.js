!function(t){"use strict";t(document).ready(function(){var a,e,s,o,i="";function l(t,a,s=0){let o;switch(a){case"image":return'<div class="wtl-product-img"><a href="'+t.slug+'"><img src="'+t.image+'" class="product-table-cell-img wtl-product-img"/></a></div>';case"title":return o='<div><a class="wtl-product-title" href="'+t.slug+'"><h2>'+t.title+"</h2></a><br/>",o+="</div>";case"meta_field":return'<div class="wtl-product-meta">'+t.meta+"</div>";case"categories":return'<div class="wtl-product-categories"><small>'+t.categories.replace("|","'").slice(0,-1)+"</small></div>";case"rating":return'<div class="wtl-product-rating">'+t.rating+"</div>";case"price":return o=function(t,a){if(parseInt(e.options.sale)){if(parseInt(a)){if("%"!=e.options.sale_text)return'<span class="wtl-onsale"><span class="onsale">'+e.options.sale_text+"</span></span>";{let e=parseFloat(t)-parseFloat(a),s=e/parseFloat(t)*100;return'<span class="wtl-onsale"><span class="onsale">-'+parseInt(s)+"%</span></span>"}}return'<span class="wtl-onsale"><span></span></span>'}return""}(t.regular,t.sale_price),o+='<div class="product-price-'+t.id+' wtl-product-price">',t.sale_price?(o+="<del>"+t.price+"</del><br/>",o+=t.sale+"</div>"):o+=t.price+"</div>";case"qty":return t.price&&(o+='<div class="wtl-product-qty"><input type="number" min="1" max="100" class="product-qty" data-ref="'+t.id+'" value="1"/></div>'),o;case"add_to_cart":return t.regular||t.sale_price?"variable"!=t.type&&t.price?(o='<div class="wtl-product-add-to-cart">',o+='<a href="?add_to_cart='+t.id+'" data-quantity="1" class="product-qty-'+t.id+' button add_to_cart_button ajax_add_to_cart" data-product_id="'+t.id+'" rel="nofollow">'+woo_table_list.cart_text+"</a></div>"):("variable"===t.type&&(o='<div class="wtl-product-add-to-cart">',o+='<a href="#" class="button product-variations wtl-product-variations" data-ref="'+t.id+'" data-name="'+t.title+'" data-meta="'+t.meta+'" data-index="'+s+'">'+woo_table_list.options_text+"</a>",o+="</div>"),o):(o='<div class="wtl-product-add-to-cart">')+'<a class="button" href="'+t.slug+'">'+woo_table_list.cart_text+"</a></div>";default:return o}}function r(){if(a=JSON.parse(window.sessionStorage.getItem("wtl_current")),t(".product-variations-form-"+a.id).length)t(".product-variations-form-"+a.id).fadeIn("slow");else{let s=t('<div class="products-variations-form flex flex-row p-0 product-variations-form-'+a.id+'">');t(e.button_close).attr("data-target",".products-variations-form").appendTo(s);let o=t('<div class="w-50 left">'),i=t('<div class="w-50 right p-1">');t('<img class="wtl-modal-image" src="'+a.image+'"/>').appendTo(o),t(o).appendTo(s);let r=t("<h2>");t(l(a,"title")).appendTo(r),t(r).appendTo(i),t("<p>"+a.excerpt+"</p>").appendTo(i).addClass("text-xs");let d=t('<div class="wtl-ajax-form" id="wtl-ajax-form-'+a.id+'">'),n=function(){let e=t(".products").find(".post-"+a.id);d=t(e).find("form"),t(d).find("a.reset_variations").remove();let s=t(d).find("button[type=submit]");return t(s).replaceWith('<span href="#" class="wtl-add-to-cart button">'+t(s).text()+"</span>"),t(d)}();t(n).appendTo(d),t('<input type="hidden" value="1" class="wtl-qty"/>').appendTo(d),t(d).find(".single_add_to_cart_button").addClass("wtl-add-to-cart"),t(d).appendTo(i),t(i).appendTo(s),t(s).appendTo(t("footer")),t(s).fadeIn("slow")}}function d(){var a={};let e=t(".wtl-ajax-form").find('select[name^="attribute"]');return e.length||(e=t(".wtl-ajax-form").find('[name^="attribute"]:checked')),e.length||(e=t(".wtl-ajax-form").find('input[name^="attribute"]')),e,e.each(function(){var e,s,o=t(this),i=o.attr("name"),l=o.val();if(0===l.length)return e=i.lastIndexOf("_"),s=i.substring(e+1),o.addClass("required error").before('<div class="ajaxerrors"><p>Please select '+s+"</p></div>"),!1,!1;a[i]=l}),a}function n(a){let e=document.querySelectorAll(".products-data"),s=[];return e.forEach(a=>{let e=a.getAttribute("id"),o=t("#"+e).data("json");o.id=e.split("-")[1],s.push(o)}),s}!parseInt(woo_table_list.enable)?t(".products").removeClass("products-not-visible"):function(){let a=[];if(woo_table_list.table_layout){let t=woo_table_list.table_layout.split(";");t.forEach(t=>{a.push(t.split("|"))})}e={options:woo_table_list,layout:a,shop:t("ul.products"),button_close:t('<span class="product-variations-close">x</span>'),dataEl:t(".products-data"),products:n(".products-data")},parseInt(e.options.woo_product_page)&&(o=t('<div class="products-table-list-btn products-table-list-btn-single" data-trigger="0" title="List View"><span class="wtl-table-list-icon dashicons dashicons-list-view"></span></div>'),i=t(".related").find("h2"),void 0!==t(i)&&t(i).length&&t(i).before(t(o)));console.log(e),function(){console.log("rendering ... ");let a=t('<div class="wtl-wrapper">');e.products.forEach((s,o)=>{let i=t('<div class="products-table-row">');if(e.layout.forEach(a=>{let e=t('<div class="products-table-col products-table-col-'+a[0]+'">');a.forEach(a=>{let i=l(s,a,o);t(i).appendTo(e)}),a.length>1&&t(e).addClass("flex-column"),t(e).appendTo(i)}),t(i).find(".wtl-onsale")){let a=t(i).find(".wtl-onsale");t(i).find(".wtl-onsale").remove(),t(a).appendTo(i)}t(i).appendTo(a)}),t(e.shop).before(a),parseInt(e.options.default)?(t(a).fadeIn(),t(".oceanwp-grid-list").fadeOut(),t(e.shop).fadeOut(),t(".wtl-table-list-icon").removeClass("dashicons-list-view"),t(".wtl-table-list-icon").addClass("dashicons-grid-view")):(t(".products-table-list-btn").data("trigger","1"),t(".oceanwp-grid-list").fadeIn(),t(".products").find(".variations_form").css("display","none"),t(e.shop).fadeIn())}()}(),t(document).delegate(".products-table-list-btn","click",function(){parseInt(t(this).data("trigger"))?(t(this).data("trigger",0),t(".oceanwp-grid-list").fadeOut(),t("ul.products").find(".variations_form").css("display","block"),t("ul.products").fadeOut().addClass("products-not-visible"),t(".wtl-wrapper").fadeIn(),t(".wtl-table-list-icon").removeClass("dashicons-list-view"),t(".wtl-table-list-icon").addClass("dashicons-grid-view")):(t(this).data("trigger",1),t("ul.products").fadeIn().removeClass("products-not-visible"),t(".oceanwp-grid-list").fadeIn(),t("ul.products").find(".variations_form").css("display","none"),t(".wtl-wrapper").fadeOut(),t(".wtl-table-list-icon").removeClass("dashicons-grid-view"),t(".wtl-table-list-icon").addClass("dashicons-list-view")),window.sessionStorage.setItem("wtl_view",t(this).data("trigger"))}),t(document).delegate(".wtl-product-variations","click",function(a){a.preventDefault();let s=e.products.filter(a=>parseInt(a.id)===parseInt(t(this).data("ref")));window.sessionStorage.setItem("wtl_current",JSON.stringify(s[0])),r()}),t(document).delegate(".product-variations-close","click",function(a){a.preventDefault();let e=t(this).data("target");t(e).fadeOut("slow")}),t(document).delegate(".wtl-add-to-cart","click",function(s){s.preventDefault(),function(){let s={action:e.options.action,product_id:a.id,quantity:t(".wtl-qty").val(),variation_id:t(".wtl-ajax-form").find("input[name=variation_id]").val(),variations:d()};t(".wtl-add-to-cart").text("...").prop("disabled","disabled"),t.ajax({url:e.options.admin_url,type:"POST",data:s}).done(function(s){let o=t('<div class="wtl-added-to-cart"><div>'+a.title+" "+e.options.cart_added+'</div><div><a href="'+e.options.cart_url+'"><span class="button wtl-goto-cart">'+e.options.cart_goto+"</span></a></div></div>");t(e.button_close).appendTo(o),t(e.button_close).data("target",".wtl-added-to-cart"),t(o).appendTo(document.body),t(".products-variations-form").fadeOut(),s.error&&t(".added-to-cart").html("An error occured!")})}()}),t(document).delegate(".wtl-variations-qty","change",function(a){t(".wtl-qty").val(t(this).val())}),t(document).delegate(".product-table-cell-img","mouseover",function(a){if(parseInt(e.options.image_zoom)){t(this).css("border","1px solid #000");t('<div class="products-table-image-zoom">').css({left:a.pageX+40+"px",top:a.pageY-80+"px"}).css("background","url("+t(this).attr("src")+")").css("background-size","cover").fadeIn("slow").appendTo(document.body)}}),t(document).delegate(".product-table-cell-img","mouseout",function(){parseInt(e.options.image_zoom)&&(t(this).css("border","0px"),t(".products-table-image-zoom").remove())})})}(jQuery);